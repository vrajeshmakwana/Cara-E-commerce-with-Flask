{% extends "dash_inheritance.html"%}

{% block body%}
<style>
    /* Global Styles */
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f7f7f7;
        margin: 0;
        padding: 0;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease-in-out;
    }

    .container:hover {
        box-shadow: 0 8px 40px rgba(0, 0, 0, 0.2);
    }

    h1 {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: #3e3e3e;
        font-weight: 600;
    }

    a {
        color: #3e3e3e;

    }



    .search-filter,
    .sort-options {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    #p {
        color: #fff;
    }

    #searchBar,
    #customerStatusFilter,
    #ageFilter,
    #regionFilter {
        padding: 12px 15px;
        width: 22%;
        font-size: 1rem;
        background-color: #f0f0f0;
        border: 1px solid #ddd;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    #searchBar:focus,
    #customerStatusFilter:focus,
    #ageFilter:focus,
    #regionFilter:focus {
        outline: none;
        border: 2px solid #007bff;
    }

    .sort-options button {
        padding: 12px 25px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.3s ease;
    }

    .sort-options button:hover {
        background-color: #0056b3;
    }

    /* Notification Bar */
    .notifications {
        background-color: #f39c12;
        color: white;
        padding: 12px;
        margin-bottom: 20px;
        border-radius: 8px;
        text-align: center;
        display: none;
        font-size: 1.1rem;
    }

    /* Customer Cards */
    .customer-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
    }

    .customer-card {
        background-color: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .customer-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        cursor: pointer;
    }

    /* Customer Card Content */
    .card-content img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #007bff;
        transition: transform 0.3s ease;
    }

    .customer-card:hover .card-content img {
        transform: scale(1.1);
    }

    .card-content h3 {
        text-align: center;
        font-size: 1.5rem;
        color: #333;
        margin: 15px 0;
        font-weight: 600;
    }

    .card-content p {
        text-align: center;
        font-size: 1.1rem;
        color: #555;
    }

    /* Status Badge */
    .badge {
        position: absolute;
        top: 12px;
        right: 12px;
        background-color: #28a745;
        color: white;
        padding: 8px 16px;
        border-radius: 25px;
        font-weight: bold;
        font-size: 1rem;
        display: none;
    }

    .customer-card[data-status="new"] .badge {
        display: block;
    }

    #searchBar,
    #customerStatusFilter,
    #ageFilter,
    #regionFilter {
        background-color: #f0f0f0;
    }

    /* Media Queries for Responsiveness */
    @media (max-width: 768px) {

        .search-filter,
        .sort-options {
            flex-direction: column;
            align-items: flex-start;
        }

        #searchBar,
        #customerStatusFilter,
        #ageFilter,
        #regionFilter {
            width: 100%;
            margin-bottom: 10px;
        }

        .sort-options button {
            width: 100%;
            margin-bottom: 10px;
        }

    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchBar = document.getElementById('searchBar');
        const statusFilter = document.getElementById('customerStatusFilter');
        const ageFilter = document.getElementById('ageFilter');
        const regionFilter = document.getElementById('regionFilter');
        const sortName = document.getElementById('sortName');
        const sortPurchase = document.getElementById('sortPurchase');
        const customerCards = document.querySelectorAll('.customer-card');
        const notifications = document.getElementById('notifications');

        // Display a new notification for new customers
        setTimeout(function () {
            notifications.style.display = 'block';
            notifications.innerHTML = '<p id="p">You have new customers!</p>';
        }, 5000);

        // Filter functionality for search bar
        searchBar.addEventListener('input', function () {
            const query = searchBar.value.toLowerCase();
            customerCards.forEach(card => {
                const name = card.querySelector('h3').textContent.toLowerCase();
                const email = card.querySelector('p').textContent.toLowerCase();
                if (name.includes(query) || email.includes(query)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Filter functionality for status, age, and region
        function applyFilters() {
            const statusValue = statusFilter.value;
            const ageValue = ageFilter.value;
            const regionValue = regionFilter.value;

            customerCards.forEach(card => {
                const status = card.getAttribute('data-status');
                const age = card.getAttribute('data-age');
                const region = card.getAttribute('data-region');

                if ((statusValue === '' || status === statusValue) &&
                    (ageValue === '' || age === ageValue) &&
                    (regionValue === '' || region === regionValue)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        statusFilter.addEventListener('change', applyFilters);
        ageFilter.addEventListener('change', applyFilters);
        regionFilter.addEventListener('change', applyFilters);

        // Sorting functionality
        sortName.addEventListener('click', function () {
            const sortedCards = Array.from(customerCards).sort((a, b) => {
                const nameA = a.querySelector('h3').textContent.toLowerCase();
                const nameB = b.querySelector('h3').textContent.toLowerCase();
                return nameA.localeCompare(nameB);
            });

            sortedCards.forEach(card => document.querySelector('.customer-cards').appendChild(card));
        });

        sortPurchase.addEventListener('click', function () {
            const sortedCards = Array.from(customerCards).sort((a, b) => {
                const purchaseA = a.querySelector('p:last-child').textContent.includes('Yes') ? 1 : 0;
                const purchaseB = b.querySelector('p:last-child').textContent.includes('Yes') ? 1 : 0;
                return purchaseB - purchaseA;
            });

            sortedCards.forEach(card => document.querySelector('.customer-cards').appendChild(card));
        });
    });

</script>
<div class="container">
    <h1>Customer Dashboard</h1>

    <!-- Notifications -->
    <div id="notifications" class="notifications">
        <p id="p">No new notifications</p>
    </div>

    <!-- Search Bar and Filters -->
    <div class="search-filter">
        <input type="text" id="searchBar" placeholder="Search by Name, Email">
        <select id="customerStatusFilter">
            <option value="">Filter by Status</option>
            <option value="new">New Customers</option>
            <option value="recent">Recently Made a Purchase</option>
            <option value="regular">Regular Customers</option>
        </select>
        <select id="ageFilter">
            <option value="">Filter by Age</option>
            <option value="18-25">18-25</option>
            <option value="26-35">26-35</option>
            <option value="36-50">36-50</option>
        </select>
        <select id="regionFilter">
            <option value="">Filter by Region</option>
            <option value="North">North</option>
            <option value="South">South</option>
            <option value="East">East</option>
            <option value="West">West</option>
        </select>
    </div>

    <!-- Sort Buttons -->
    <div class="sort-options">
        <button id="sortName">Sort by Name</button>
        <button id="sortPurchase">Sort by Recent Purchase</button>
    </div>

    <!-- Customer Cards -->
    <div class="customer-cards">
        <!-- Example Customer Card -->
        {% if user %}
        {% for value in user %}

        <div class="customer-card" data-status="new" data-name="John Doe" data-age="26-35" data-region="North">
            <div class="badge">New</div>
            <div class="card-content">

                <img src="{{images[loop.index0]}}" alt="Customer">

                <h3>{{value.Username}}</h3>
                <p>Email: {{value.Email}}</p>
                <p>Age: 30</p>
                <p>Region: North</p>
                <p>Recent Purchase: Yes</p>
                <p>

                    <a href="/orders/{{value.Sr_No}}">

                        <button id="btn" class="bg-white mt-4 text-teal-600 border border-teal-600 rounded-md px-4 py-2 text-sm font-medium 
         hover:bg-teal-600 hover:text-white transition-colors duration-300 ease-in-out 
         focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-1
         active:scale-95 shadow-sm hover:shadow-md">
                            View Details
                        </button>

                    </a>
                </p>

            </div>
        </div>
        {% endfor %}
        {% else %}
        <script>
            alert("Error...")

        </script>
        <h2>No Record Found...</h2>
        {% endif %}

        <!-- More customer cards go here -->
    </div>
</div>
{% endblock %}